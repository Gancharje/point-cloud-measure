![alt text](http://postimg.su/image/IfQ75TeV/sample.png)

# –ò–∑–º–µ—Ä–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã –æ–±–ª–∞–∫–∞ —Ç–æ—á–µ–∫

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è —à–∏—Ä–∏–Ω—ã 3D –æ–±–ª–∞–∫–∞ —Ç–æ—á–µ–∫ –≤–¥–æ–ª—å –∑–∞–¥–∞–Ω–Ω—ã—Ö –æ—Å–µ–π, —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –∏ —ç–∫—Å–ø–æ—Ä—Ç–æ–º –≤ CSV.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ß–µ—Ä–µ–∑ Poetry

```bash
poetry install
```

### –ò–ª–∏ —á–µ—Ä–µ–∑ pip

```bash
pip install numpy scipy matplotlib ezdxf open3d
```

## –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≥–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç:

```bash
python app.py
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–π `.exe` —Ñ–∞–π–ª, —Å–æ–∑–¥–∞–Ω–Ω—ã–π —á–µ—Ä–µ–∑ PyInstaller, –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Windows –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Python.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –æ–±–ª–∞–∫–æ —Ç–æ—á–µ–∫**:  
   –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–ó–∞–≥—Ä—É–∑–∏—Ç—å XYZ"** –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª `.xyz`.

2. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –æ—Å–∏**:  
   –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–ó–∞–≥—Ä—É–∑–∏—Ç—å DXF"** –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª `.dxf` —Å –æ—Å—è–º–∏.

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞–¥–∏—É—Å**:  
   –í–≤–µ–¥–∏—Ç–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `0.025`).

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è**:  
   –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–ó–∞–ø—É—Å—Ç–∏—Ç—å"**.

    - –ü—Ä–æ–µ–∫—Ü–∏—è –æ–±–ª–∞–∫–∞ –Ω–∞ –ø–ª–æ—Å–∫–æ—Å—Ç—å
    - –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã –ø–æ –∫–∞–∂–¥–æ–π –æ—Å–∏
    - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ

5. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**:  
   –ù–∞–∂–º–∏—Ç–µ **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å CSV"** –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏–∑–º–µ—Ä–µ–Ω–∏–π –≤ CSV-—Ñ–∞–π–ª.

---

## API –∏ –∫–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã

### `class WidthApp`

–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –£–ø—Ä–∞–≤–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ —Å–≤—è–∑—ã–≤–∞–µ—Ç –º–æ–¥—É–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏.

**–ú–µ—Ç–æ–¥—ã:**

- `load_xyz()` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –æ–±–ª–∞–∫–∞ —Ç–æ—á–µ–∫  
- `load_dxf()` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –æ—Å–µ–π  
- `run()` ‚Äî –∑–∞–ø—É—Å–∫ –∏–∑–º–µ—Ä–µ–Ω–∏—è  
- `save_csv()` ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤  
- `_get_radius()` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–¥–∏—É—Å–∞  
- `_log()` ‚Äî –≤—ã–≤–æ–¥ –ª–æ–≥–æ–≤ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å  

---

### `class PointCloudProcessor`

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–±–ª–∞–∫–æ —Ç–æ—á–µ–∫ –∏ –æ—Å–∏, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ–µ–∫—Ü–∏—é –∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è.

**–°–≤–æ–π—Å—Ç–≤–∞:**

- `radius` ‚Äî —Ä–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞ (`float`, > 0)  
- `point_cloud` ‚Äî –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ –æ–±–ª–∞–∫–æ —Ç–æ—á–µ–∫ (`open3d.geometry.PointCloud`)  
- `axes` ‚Äî –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –æ—Å–∏ (—Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ `ezdxf.entities.Line`)  

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**

- `load_point_cloud(path: str)` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ `.xyz` —Ñ–∞–π–ª–∞  
- `load_axes(path: str)` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –æ—Å–µ–π –∏–∑ `.dxf`  
- `project_to_plane()` ‚Äî —Å–±—Ä–æ—Å Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (–ø—Ä–æ–µ–∫—Ü–∏—è –Ω–∞ XY)  
- `measure_width() -> list` ‚Äî –∏–∑–º–µ—Ä–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã –æ–±–ª–∞–∫–∞ –ø–æ –æ—Å—è–º, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ—Ä–µ–Ω–∏–π  

---

### `class Visualizer`

–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é Matplotlib –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Tkinter.

**–ú–µ—Ç–æ–¥:**

- `plot(pcd, axes, measurements)` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ–±–ª–∞–∫–æ, –æ—Å–∏ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑–º–µ—Ä–µ–Ω–∏–π  

---

## –§–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

- `.xyz` ‚Äî —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å —Ç–æ—á–∫–∞–º–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:  
  ```
  X Y Z
  ```
  (—Ç—Ä—ë—Ö–º–µ—Ä–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)

- `.dxf` ‚Äî —Ñ–∞–π–ª —Å –æ—Å—è–º–∏ (`LINE` –æ–±—ä–µ–∫—Ç—ã), –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–º–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–∑–º–µ—Ä–µ–Ω–∏–π

---

## –§–æ—Ä–º–∞—Ç –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

CSV-—Ñ–∞–π–ª —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:

| ID –æ—Å–∏ | –ù–∞—á–∞–ª–æ X | –ù–∞—á–∞–ª–æ Y | –ö–æ–Ω–µ—Ü X | –ö–æ–Ω–µ—Ü Y | –®–∏—Ä–∏–Ω–∞ | –ö–æ–ª-–≤–æ —Ç–æ—á–µ–∫
 
---

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
python app.py
```

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ `sample.xyz`  
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ `axes.dxf`  
3. –í–≤–µ–¥–∏—Ç–µ —Ä–∞–¥–∏—É—Å, –Ω–∞–ø—Ä–∏–º–µ—Ä `0.025`  
4. –ù–∞–∂–º–∏—Ç–µ **"–ó–∞–ø—É—Å—Ç–∏—Ç—å"**  
5. –ü–æ—Å–ª–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ CSV

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

–ê–≤—Ç–æ—Ä: –ê–∫–∏–º–æ–≤ –ü–∞–≤–µ–ª  
üìß justgansecret@gmail.com

---


## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ, —á—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –∏ –≤—ã—è–≤–ª—è—Ç—å –æ—à–∏–±–∫–∏.
- –ò–∑–º–µ—Ä–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
- –ü—Ä–æ–µ–∫—Ç —É–ø–∞–∫–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é Poetry –∏ —Å–æ–±—Ä–∞–Ω –≤ `.exe` —á–µ—Ä–µ–∑ PyInstaller –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è.
